域信任
---

域信任是为了解决多域环境中的跨域资源共享问题而诞生的。两个域之间必须拥有信任关系(trust relationship)，才可以访问到对方域内的资源。任何一个新的子域被加入到域树之后，这个域会自动信任其上一层的父域，同时父域也会自动信任新子域，而且这些信任关系具备双向传递性(two-way transitive)。由于此信任工作是通过Kerberos security protocol来完成的，因为也被成为 Kerberos Trust。

域信任作为一种机制，允许另一个域的用户在通过身份验证后访问本域中的资源。同时，域信任利用DNS服务器定位两个不同子域的[域控制器](https://so.csdn.net/so/search?q=%E5%9F%9F%E6%8E%A7%E5%88%B6%E5%99%A8&spm=1001.2101.3001.7020)，如果两个域中的域控制器都无法找到另一个域，那么也就不存在通过域信任关系进行跨域资源共享了。

域信任关系分为单向信任和双向信任：

*   单向信任是指在两个域之间创建单向的信任路径，即在一个方向上是信任流，在另一个方向上是访问流。在受信任域和信任域之间的单向信任中，受信任域内的用户或计算机可以访问信任域中的资源，但信任域内的用户却无法访问受信任域内的资源。也就是说，若A域信任B域，那么B域内受信任的主体可以访问A域内信任B域的资源。
*   双向信任是指两个单向信任的组合，信任域和受信任域彼此信任，在两个方向上都有信任流和访问流。这意味着，可以从两个方向在两个域之间传递身份验证请求。活动目录中的所有域信任关系都是双向可传递的。在创建子域时，会在新的子域和父域之间自动创建双向可传递信任关系。在早期的域中，域信任是单向的，从Windows Server2003开始，域信任关系变为双向的。

域信任还分为内部信任和外部信任

*   在默认情况下，使用活动目录安装向导将新域添加到域树或林根域中，会自动创建双向可传递信任。在现有林中创建域时，将建立新的树根信任。当前域树中的两个或多个域之间的信任关系称为内部信任。这种信任关系是可以传递的。例如：有三个子域BA、CA、DA。BA域信任CA域，CA域信任DA域，那么BA域也信任DA域。
*   外部信任是指两个不同林中的域的信任关系。外部信任是不可传递的。但是，林信任关系可能是不可传递的，也可能是可传递的，这取决于所使用的林间信任的类型。林信任关系只能在位于不同林中的域之间创建

如图所示域树架构。域A和域B、C之间都是双向信任关系；域A信任域B，域B也信任域A；域A信任域C，域C也信任域A。因此，域B会自动信任域C，域C也会自动信任域B。所以当任何一个新域加入到域树后，默认它会自动的建立起双向信任的关系。因此只要拥有任何一个域内的权限，那么就可以访问其他域内的资源。

![](https://img-blog.csdnimg.cn/20210111151733805.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM2MTE5MTky,size_16,color_FFFFFF,t_70)

 如果想跟我一起讨论的话，就快加入我的知识星球吧。星球里有一千多位同样爱好安全技术的小伙伴一起交流！[知识星球 | 深度连接铁杆粉丝，运营高品质社群，知识变现的工具](https://wx.zsxq.com/dweb2/index/group/88514121251242 "知识星球 | 深度连接铁杆粉丝，运营高品质社群，知识变现的工具")

![](https://img-blog.csdnimg.cn/1219ed79e9ed449d85d27b732cda5ea6.jpg)