**目录**

[漏洞背景](#t0 "漏洞背景")

[漏洞影响版本](#t1 "漏洞影响版本")

[利用条件](#t2 "利用条件")

[漏洞复现](#t3 "漏洞复现")

[修复建议](#t4 "修复建议")

* * *

漏洞背景
----

2019年10月14日， sudo 官方在发布了 CVE-2019-14287 的漏洞预警。

sudo 是所有 unix操作系统(BSD, MacOS, GNU/Linux) 基本集成的一个用户权限控制/切换程序。允许管理员控制服务器下用户能够切换的用户权限。

CVE-2019-14287 是管理员在配置文件中用了 ALL 关键词后造成的。但默认的 sudo 配置文件不受影响。

漏洞影响版本
------

   sudo < 1.8.28

利用条件
----

1.      sudo的版本号<1.8.28
2.      知道当前用户的密码
3.      当前用户存在于sudo权限列表

第一点和第二点比较好容易理解，那么第三点当前用户存在于sudo权限列表这个怎么理解呢？

当 /etc/sudoers 文件存在如下形式的配置会导致漏洞的产生

```
hack ALL=(ALL, !root)  ALL
```


这句话的含义就是：

允许 hack 用户以非 root 权限之外的所有用户权限运行命令，也就是说hack用户拥有root权限以外的所有权限。但是这样的配置应该会出现在比较少的特殊情况。

漏洞复现
----

我们在/etc/sudoers配置文件中加上这一行

```
hack ALL=(ALL, !root)  ALL
```


![](https://img-blog.csdnimg.cn/20200224201348735.png)

![](https://img-blog.csdnimg.cn/20200224201310309.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM2MTE5MTky,size_16,color_FFFFFF,t_70)

修复建议
----

*   升级sudo到1.8.28版本
*   做好sudo用户列表管理

  如果想跟我一起讨论的话，就快加入我的知识星球吧。星球里有一千多位同样爱好安全技术的小伙伴一起交流！

![](https://img-blog.csdnimg.cn/1219ed79e9ed449d85d27b732cda5ea6.jpg)

文章知识点与官方知识档案匹配，可进一步学习相关知识

[CS入门技能树](https://edu.csdn.net/skill/gml/gml-1c31834f07b04bcc9c5dff5baaa6680c)[Linux入门](https://edu.csdn.net/skill/gml/gml-1c31834f07b04bcc9c5dff5baaa6680c)[初识Linux](https://edu.csdn.net/skill/gml/gml-1c31834f07b04bcc9c5dff5baaa6680c)10917 人正在系统学习中