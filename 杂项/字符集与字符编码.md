**目录**

[字符集和字符编码](#t0)

[Unicode字符集](#t1)

[UTF-8](#t2)

[UTF-16](#t3)

[ASCII码](#t4)

[中文字符集(GBK/GB2312/GB18030)](#t5)

[ANSI](#t6)

* * *

字符集和字符编码一直是一个让人头疼的问题，我们经常在访问某些网站或者打开某些文件的时候，会显示乱码。归根到底，就是字符编码的问题。今天，我就跟大家好好聊聊字符编码！

![](https://img-blog.csdnimg.cn/20181116141626195.png)

字符集和字符编码
========

**字符集**  
字符集只是一个规则[集合](https://so.csdn.net/so/search?q=%E9%9B%86%E5%90%88&spm=1001.2101.3001.7020)的名字，  
字符集 = 字库表（character repertoire）+ 编码字符集（coded character set）+ 字符编码（character encoding form）  
**字库表**  
字库表是一个相当于所有可读或者可显示字符的数据库，字库表决定了整个字符集能够展现表示的所有字符的范围。  
**编码字符集（简称字符集，如Unicode、ASCII）**  
编码字符集，用一个编码值code point来表示一个字符（即该字符在子库表中的位置），这个值称为字符对应于编码字符集（如：[Unicode](https://so.csdn.net/so/search?q=Unicode&spm=1001.2101.3001.7020)、ASCII）的序号。  
**字符编码**  
字符编码，是编码字符集和实际存储数值之间的转换关系。字符，是根据字符编码方案转换为一个二进制数值存储在计算机中的。  
所以，字符编码是定义在字符集上的映射规则。（字符-------->计算机中的实际存储值）  
   
注意： 编码字符集Unicode，有UTF-8、UTF-16、UTF-32等多种字符编码  
            编码字符集ASCII,本身就是编码字符集，又是字符编码  
            编码字符集GB2312，只有EUC-CN一种字符编码

Unicode字符集
----------

为了解决不同国家ANSI编码的冲突问题，Unicode应运而生：如果全世界每一个符号都给予一个独一无二的编码，那么乱码问题就会消失。这就是Unicode，就像它的名字表示的，这是一种所有符号的编码。 

Unicode只是一个字符集，用 0-0x10FFFF(0-1114111) 来映射全球各国的语言文字，它只规定了符号的二进制代码，并没有规定这个二进制代码应该如何存储。比如，汉字“ 严 ”的unicode的16进制表示是4E25，转换成二进制是 100111000100101 ，有15位，需要用到2个字节。还有其他更大的符号，有可能需要3个或者4个字节。但是英文字母只用一个字节表示就够了，如果unicode统一规定，每个符号用4个字节表示，那么每个英文字母有3个字节是空的，这对于资源来说是非常浪费的。

这就出现了后来的UTF8和UTF16编码，他们规定了字符如何存储！

### UTF-8

UTF-8是unicode字符集下的字符编码。他规定了字符应该如何存储。UTF-8最大的一个特点就是它的一种变长的编码方式。最新版的UTF-8中，它使用 1~6 个字节表示一个符号，根据不同的符号而变化字节长度。

为了更好的理解后面的实际应用，我们这里简单的介绍下UTF-8的编码实现方法。即UTF-8的物理存储和Unicode序号的转换关系。 UTF-8编码为变长编码。最短编码单位（code unit）为一个字节，最长编码单位6个字节，用1-6个字节描述一个字符。一个英文字符占1字节，一个中文占2个或者3个字节，有的中文占4个字节。

*   如果一个字节的以0开头，那么代表当前字符为单字节字符，占用一个字节的空间。0之后的所有部分（7个bit）代表在Unicode中的序号，有效位为7位
*   如果一个字节以110开头，那么代表当前字符为双字节字符，占用2个字节的空间。110之后的所有部分（5个bit）加上后一个字节的除10外的部分（6个bit）代表在Unicode中的序号。且第二个字节以10开头。有效位为11位
*   如果一个字节以1110开头，那么代表当前字符为三字节字符，占用3个字节的空间。110之后的所有部分（5个bit）加上后两个字节的除10外的部分（12个bit）代表在Unicode中的序号。且第二、第三个字节以10开头。有效位为17位
*   如果一个字节以10开头，那么代表当前字节为多字节字符的第二个字节。10之后的所有部分（6个bit）和之前的部分一同组成在Unicode中的序号。

具体每个字节的特征可见下表，其中x代表序号部分，把各个字节中的所有x部分拼接在一起就组成了在Unicode字库中的序号

![](https://img-blog.csdnimg.cn/20181116141838341.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM2MTE5MTky,size_16,color_FFFFFF,t_70)

  
我们分别看从一个字节到三个字节的UTF-8编码例子：

![](https://img-blog.csdnimg.cn/20181116141853418.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM2MTE5MTky,size_16,color_FFFFFF,t_70)

我们可以得到以下规律：

*   1个字节的UTF-8十六进制编码一定是以比 8 小的数字开头的
*   2个字节的UTF-8十六进制编码一定是以 C 或 D 开头的
*   3个字节的UTF-8十六进制编码一定是以 E 开头的

### UTF-16

UTF-16编码采用2个字节代表一个字符，英文和中文都是占两个字节  
当指定UTF-16编码里需指定大小端：UTF-16BE 、UTF-16LE 、UTF-16

![](https://img-blog.csdnimg.cn/20181116141935612.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM2MTE5MTky,size_16,color_FFFFFF,t_70)

ASCII码
------

我们知道，在计算机内部，所有的信息最终都表示为一个二进制的字符串。每一个二进制位（bit）有0和1两种状态，因此八个二进制位就可以组合出256种状态，这被称为一个字节（byte）。也就是说，一个字节一共可以用来表示256种不同的状态，每一个状态对应一个符号，就是256个符号，从0000000~11111111。  
上个世纪60年代，美国制定了一套字符编码，对英语字符与二进制位之间的关系，做了统一规定。这被称为[ASCII码](https://so.csdn.net/so/search?q=ASCII%E7%A0%81&spm=1001.2101.3001.7020)，一直沿用至今。  
ASCII码一共规定了128个字符的编码，比如空格“SPACE”是32（二进制00100000），大写的字母A是65（二进制01000001）。这128个(0~127)符号（包括32个不能打印出来的控制符号），只占用了一个字节的后面7位，最前面的1位统一规定为0

*   0～31及127(共33个)是控制字符或通信专用字符，其余的为可显示字符。
*   32～126(共95个)是字符(32是空格），其中 48~57 为 0~9 十个阿拉伯数字。
*   65～90为26个大写英文字母，97～122号为26个小写英文字母，其余为一些标点符号、运算符号等。

![](https://img-blog.csdnimg.cn/20181116142025643.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM2MTE5MTky,size_16,color_FFFFFF,t_70)
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

中文字符集(GBK/GB2312/GB18030)
-------------------------

GB2312：中文字符集，包含ASCII字符集。ASCII部分用单字节表示，剩余部分用双字节表示。  
GBK：GB2312的扩展，完整包含了GB2312的所有内容。  
GB18030：GBK字符集的超集，常叫大汉字字符集，也叫CJK（Chinese，Japanese，Korea）字符集，包含了中、日、韩三国语言中的所有字符。

GBK编码，是在 GB2312-80 标准基础上的内码扩展规范，使用了双字节编码方案，其编码范围从8140至FEFE（剔除xx7F），共23940个码位，共收录了21003个汉字，完全兼容GB2312-80标准，支持国际标准ISO/IEC10646-1和国家标准GB13000-1中的全部中日韩汉字，并包含了BIG5编码中的所有汉字。GBK编码方案于1995年10月制定， 1995年12月正式发布。  
一个英文占一个字节的空间，一个中文占两个字节的空间

ANSI
----

ANSI编码是一种对ASCII码的拓展：ANSI编码用 0x00~0x7f (0-127) 范围的1 个字节来表示 1 个英文字符，超出一个字节的 0x80~0xFFFF（128-65535） 范围来表示其他语言的其他字符。也就是说，ANSI码仅在前128(0~127)个与ASCII码相同，之后的字符全是某个国家语言的所有字符。值得注意的是，两个字节最多可以存储的字符数目是2的16次方，即65536个字符，这对于一个语言的字符来说，绝对够了。还有ANSI编码其实包括很多编码：中国制定了GB2312编码，用来把中文编进去。另外，日本把日文编到Shift\_JIS里，韩国把韩文编到Euc-kr里，各国有各国的标准。受制于当时的条件，不同语言之间的ANSI码之间不能互相转换，这就会导致在多语言混合的文本中会有乱码。 在中国，ANSI是GBK编码，在日本是Shift\_JIS编码，不同国家，ANSI代表不同的编码  
   
话说计算机是由美国佬搞出来的嘛，他们觉得一个字节（可以表示256个编码）表示英语世界里所有的字母、数字和常用特殊符号已经绰绰有余了（其实ASCII只用了前128个编码）。后来欧洲人不干了，法国人说：我需要在小写字母加上变音符号（如：é），德国人说：我也要加几个字母（Ä ä、Ö ö、Ü ü、ß）。于是，欧洲人就将ASCII没用完的编码（128-255）为自己特有的符号编码（后来称之为“扩展字符集”）。等到我们中国人开始使用计算机的时候，尼玛，256个编码哪够？我泱泱大中华，汉字起码也得N多万吧，就连小学生都得要求掌握两三千字。国标局最后拍板：一个字节不够，那我们就用多个字节来为汉字编码吧，但是，国情那么穷，字节那么贵，三个字节伤不起，那就用俩字节吧，先给常用的几千汉字编个码，等以后国家强盛了人民富裕了，咱再扩展呗---于是GB2312就产生了。台湾同胞一看，尼玛，全是简体字，还让不让我们写繁体字的活了，于是台湾同胞也自己弄了个繁体字编码---大五码（Big-5）。同时，其它国家也在为自己的文字编码。最后，微软苦逼了：顾客就是上帝啊，你们的编码我都得满足啊，这样吧，卖给美国国内的系统默认就用ASCII编码吧，卖给中国人的系统默认就用GBK编码吧，卖给韩国人的系统默认就用EUC-KR编码，...但是为了避免你们误会我卖给你们的系统功能有差异，我就统一把你们的默认编码都显示成ANSI吧。

所以，ANSI编码在不同国家代表不同编码！